<!doctype html>
<html lang="html">
<head>
    <title>Test</title>
    <script src="JS/matter.js"></script>
    <script>
        window.addEventListener('load', function () {

            let World = Matter.World,
                Bodies = Matter.Bodies,
                Vector = Matter.Vector,
                Body = Matter.Body,
                Engine = Matter.Engine,
                Events = Matter.Events,
                Mouse = Matter.Mouse;

            let engine = Matter.Engine.create(document.getElementById('canvas-container'), {
                positionIterations: 10,
                velocityIterations: 30,
                enableSleeping: false,
                metrics: {extended: true}
            });
            engine.timing.isFixed = true;
            let runner = Engine.run(engine);

            let movable = Bodies.circle(300, 300, 10, {frictionAir: 0.000, restitution: 0.0, density: 1});
            let canvas = engine.render.canvas;
            let mouse = Mouse.create(canvas);

            Events.on(engine, 'tick', function () {

                let toSub = Vector.sub({x: 0, y: 0}, movable.velocity);
                toSub = Vector.mult(toSub, 3 / 4);
                Body.applyForce(movable, movable.position, toSub);

                let impulse = Vector.sub(mouse.position, movable.position);
                console.log("before velocity: ", 10 / runner.delta);
                impulse = Vector.mult(impulse, 3 / 4);
                Body.applyForce(movable, movable.position, impulse);
            });
            engine.world.gravity.y = 0;
            engine.world.gravity.x = 0;
            engine.timing.timeScale = 1;
            World.add(engine.world, [
                movable,
                Bodies.circle(250, 250, 20, {frictionAir: 0.000, restitution: 0.0, density: 1000}),
            ]);
        });
    </script>
</head>
<body>
<div id="canvas-container"></div>
</body>
</html>